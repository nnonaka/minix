#	$NetBSD: Makefile,v 1.30 2018/12/27 16:26:52 christos Exp $

.include <bsd.hostinit.mk>

MODULE=		grub

GNUHOSTDIST=	${.CURDIR}/../../external/gpl3/${Module}/dist

CONFIGURE_ARGS=	--with-platform=efi --target=i386

.if defined(__MINIX) && ! exists(${GNUHOSTDIST}/Makefile.in)
# MINIX: LSC: Make sure we trigger the fetch rule
.include "${.CURDIR}/../../minix/Makefile.fetchgnu"

${GNUHOSTDIST}/Makefile.in: ${fetch_done}
	@true
.endif # defined(__MINIX)


.configure_done: Makefile

MAKE_ARGS=	MACHINE= MAKEINFO=${TOOL_MAKEINFO:Q}

ALL_TARGET=	all-binutils
INSTALL_TARGET=	install-binutils

.include "${.CURDIR}/../Makefile.gnuhost"

grub-mkimage: Makefile.in
	./autogen.sh
	./configure --with-platform=efi --target=i386



